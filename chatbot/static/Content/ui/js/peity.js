(function(n,t,i){var u=function(i,r){var u=t.createElementNS("http://www.w3.org/2000/svg",i);return n.each(r,function(n,t){u.setAttribute(n,t)}),u},s="createElementNS"in t&&u("svg",{}).createSVGRect,e=1/(window.devicePixelRatio||1),r=n.fn.peity=function(t,i){return s&&this.each(function(){var f=n(this),u=f.data("peity"),e,s,h;u?(t&&(u.type=t),n.extend(u.opts,i)):(e=r.defaults[t],s={},n.each(f.data(),function(n,t){n in e&&(s[n]=t)}),h=n.extend({},e,s,i),u=new o(f,t,h),f.change(function(){u.draw()}).data("peity",u));u.draw()}),this},o=function(n,t,i){this.$el=n;this.type=t;this.opts=i},f=o.prototype;f.draw=function(){r.graphers[this.type].call(this,this.opts)};f.fill=function(){var t=this.opts.fill,i=t;return n.isFunction(i)||(i=function(n,i){return t[i%t.length]}),i};f.prepare=function(t,i){var r;return this.svg?r=n(this.svg).empty():(this.svg=u("svg",{"class":"peity"}),this.$el.hide().after(this.svg),r=n(this.svg).data("peity",this)),this.svg.setAttribute("height",i),this.svg.setAttribute("width",t),r};f.values=function(){return n.map(this.$el.text().split(this.opts.delimiter),function(n){return parseFloat(n)})};r.defaults={};r.graphers={};r.register=function(n,t,i){this.defaults[n]=t;this.graphers[n]=i};r.register("pie",{delimiter:null,diameter:16,fill:["#ff9900","#fff4dd","#ffc66e"]},function(n){var h,t,a,f,s;n.delimiter||(t=this.$el.text().match(/[^0-9\.]/),n.delimiter=t?t[0]:",");t=this.values();"/"==n.delimiter&&(h=t[0],t=[h,i.max(0,t[1]-h)]);for(var r=0,h=t.length,v=0;r<h;r++)v+=t[r];for(var n=this.prepare(n.width||n.diameter,n.height||n.diameter),r=n.width(),e=n.height(),n=r/2,e=e/2,o=i.min(n,e),l=i.PI,y=this.fill(),c=-l/2,r=0;r<h;r++)if(a=t[r],f=a/v,0!=f){if(1==f)s=u("circle",{cx:n,cy:e,r:o});else{s=2*f*l;var f=c+s,p=o*i.cos(c)+n,c=o*i.sin(c)+e,w=o*i.cos(f)+n,b=o*i.sin(f)+e;s=u("path",{d:["M",n,e,"L",p,c,"A",o,o,0,s>l?1:0,1,w,b,"Z"].join(" ")});c=f}s.setAttribute("fill",y.call(this,a,r,t));this.svg.appendChild(s)}});r.register("line",{delimiter:",",fill:"#c6d9fd",height:16,max:null,min:0,stroke:"#4d89f9",strokeWidth:1,width:32},function(n){var t=this.values();1==t.length&&t.push(t[0]);for(var r=i.max.apply(i,t.concat([n.max])),o=i.min.apply(i,t.concat([n.min])),f=this.prepare(n.width,n.height),s=f.width(),f=f.height()-n.strokeWidth,l=s/(t.length-1),r=r-o,h=0==r?f:f/r,c=f+o*h,r=[0,c],e=0;e<t.length;e++)r.push(e*l,f-h*(t[e]-o)+n.strokeWidth/2);r.push(s,c);t=u("polygon",{fill:n.fill,points:r.join(" ")});this.svg.appendChild(t);n.strokeWidth&&(n=u("polyline",{fill:"transparent",points:r.slice(2,r.length-2).join(" "),stroke:n.stroke,"stroke-width":n.strokeWidth,"stroke-linecap":"square"}),this.svg.appendChild(n))});r.register("bar",{delimiter:",",fill:["#4D89F9"],gap:1,height:16,max:null,min:0,width:32},function(n){for(var r=this.values(),v=i.max.apply(i,r.concat([n.max])),c=i.min.apply(i,r.concat([n.min])),f=this.prepare(n.width,n.height),h=f.width(),f=f.height(),l=v-c,y=0==l?0:f/l,n=n.gap,h=(h+n)/r.length,p=this.fill(),o=0;o<r.length;o++){var s=r[o],a=f-y*(s-c),t=y*s;0==t?(t=e,0>=c&&0<v||0==l)&&(a-=e):0>t&&(a+=t,t=-t);s=u("rect",{fill:p.call(this,s,o,r),x:o*h,y:a,width:h-n,height:t});this.svg.appendChild(s)}})})(jQuery,document,Math);$(function(){$("span.pie").peity("pie",{fill:["#1ab394","#d7d7d7","#ffffff"]});$(".line").peity("line",{fill:"#1ab394",stroke:"#169c81"});$(".bar").peity("bar",{fill:["#1ab394","#d7d7d7"]});$(".bar_dashboard").peity("bar",{fill:["#1ab394","#d7d7d7"],width:100});var n=$(".updating-chart").peity("line",{fill:"#1ab394",stroke:"#169c81",width:64});setInterval(function(){var i=Math.round(Math.random()*10),t=n.text().split(",");t.shift();t.push(i);n.text(t.join(",")).change()},1e3)})